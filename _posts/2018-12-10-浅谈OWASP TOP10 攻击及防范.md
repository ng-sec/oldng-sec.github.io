---
layout: post  
title: 浅谈OWASP TOP10 攻击及防范
date:  2018/12/10 22:21:32  
categories: 安全技术 
tags: OWASP
author: ng-sec  
---

* content  
{:toc}

# TOP 1 注入 Injection
## 攻击原理
注入攻击漏洞往往是**应用程序缺少**对输入进行**安全性检查**所引起的。攻击者把一些包含攻击代码当做命令或者查询语句发送给解释器，这些恶意数据可以欺骗解释器，从而执行计划外的命令或者未授权访问数据。注入漏洞通常能SQL查询、LDAP查询、OS命令、程序参数等中出现。

## 攻击示例
![enter description here](http://800wifi.com/ng-sec/1544453285727.png)

## 危害
注入能导致数据丢失或数据破坏、缺乏可审计或者拒绝服务。注入漏洞有时甚至能导致完全接管主机。
## 防范：
- 使用安全的API，避免使用解释器或提供参数化的接口（prepared statements，or stored procedures）

- 使用白名单来规范化的输入验证方法

- 对输入的特殊字符进行Escape转义处理

- 权限最小化，减轻被注入的影响

# TOP2  失效的身份认证和会话管理  Broken Authentication and Session Management
## 攻击原理
与认证和会话管理相关的应用程序功能往往得不到正确管理，这就导致攻击者破坏密码、密匙、会话令牌或利用实施漏洞冒充其他用户身份。

## 攻击示例
![enter description here](http://800wifi.com/ng-sec/1544453693943.png)


## 危害
这些漏洞可能导致部分甚至全部账户遭受攻击。一旦攻击成功，攻击者能执行合法用户的任何操作。因此特权账户会造成更大的破坏。
## 防范
>使用强大的认证和会话管理控制-OWASP的应用安全验证标准。

1)使用简单集中标准化的认证方式；
2)确保SSL在任何时候都会保护会话；
3)使用会话管理功能；
会话管理：当用户不操作时，系统必须自动终止超时会话，必须有时间限制；必须提供退出功能，允许用户强制退出会话；会话标识足够随机，防止攻击者猜测到标识；用户登录后必须分配新的会话标识，不使用用户未登录前所使用的标识，防止会话攻击。

# TOP 3 跨站脚本-XSS
## 攻击原理
XSS的出现时间跟SQL差不多，是最普遍的web应用安全漏洞。当应用程序在发送给浏览器的页面中包含用户提供的数据，但没有经过适当验证或转译，就会导致跨站脚本漏洞。XSS允许攻击者在受害者的浏览器中执行脚本，这些脚本可以劫持用户会话，破坏网站，或将用户重定向到恶意站点。
**有三种著名的跨站漏洞：**
1）存储型
2）反射型
3）DOM型
备注：反射型跨站脚本通过测试或代码分析很容易找到
## 攻击示例
![enter description here](http://800wifi.com/ng-sec/1544455003205.png)
## 危害
攻击者能在受害者浏览器中执行脚本以劫持用户会话、破坏网站、插入恶意内容、重定向用户、使用恶意软件劫持用户浏览器等等。
## 防范
![enter description here](http://800wifi.com/ng-sec/1544455120585.png)
- 防范示例：复杂的HTML代码提交，如何处理？
 ![enter description here](http://800wifi.com/ng-sec/1544455179857.png)
 
# TOP 4 不安全的对象直接引用
## 攻击原理
所谓不安全的对象直接引用，即”Insecure direct object references“，意指一个已经授权的用户，通过更改访问时的一个参数，从而访问到原本其并没有得到授权的对象。Web应用往往在生成Web页面时会用它的真实名字，且并不会对所有的目标对象访问时来检查用户权限，所以这造成不安全的对象直接引用的漏洞。



当开发人员公开对内部实现对象(如文件、目录或数据库键)的引用时，就会出现直接对象引用。如果没有访问控制检查或其他保护，攻击者可以操纵这些引用来访问未经授权的数据。
## 攻击示例
![enter description here](http://800wifi.com/ng-sec/1544455418270.png)
## 危害

## 防范
1.使用基于用户或会话的间接对象访问, 防止攻击者直接攻击未授权资源.

2.访问检查:对任何来自不受信源所使用的所有直接对象引用都进行访问控制检测，确保用户对要求的对象有访问权限